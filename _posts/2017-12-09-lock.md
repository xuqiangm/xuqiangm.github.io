---
title: 锁分类
date: 2017-12-09
categories: 基础知识
---

最近在阅读《程序员的自我修养》中，看到“同步与锁”一节，多各种锁的解释很清晰，现总结如下，方便后期查阅。

### 二元信号量（Binary Semaphore）

最简单的一种锁，只有两种状态：占用与非占有。它适合只能被唯一一个线程独占访问的资源。

### 多元信号量

简称信号量（Semaphore），对于允许多个线程并发访问的资源。一个初始值为N的信号量允许N个程序并发访问。线程访问资源的时候首先获取信号量，进行如下操作：

- 将信号量的值减1
- 如果信号量的值小于0，则进入等待状态，否则继续执行。

访问完资源之后，线程释放信号量，进行如下操作：

- 将信号量的值加1
- 如果信号量的值小于1，唤醒一个等待中的线程

### 互斥量（Mutex）

互斥量和二元信号量很类似，资源仅同时允许一个线程访问，但和信号量不同的是：

- 信号量在整个系统可以被任意线程获取并释放，也就是说，同一个信号量可以被系统中的一个线程获取之后由另一个线程释放
- 互斥量则要求哪个线程获取，则哪个线程就要负责释放。

### 临界区（Critical Section）

在术语中，把临界区的锁的获取称为进入临界区，而把锁的释放称为离开临界区。临界区和互斥量与信号量的区别在于：

- 互斥量和信号量在系统中任何进程都是可见的，也就是说，一个进程创建了一个互斥量或信号量，另一个进程试图获取该锁是合法的
- 临界区的作用范围仅限于本进程，其他的进程无法获取该锁。

### 读写锁（Read-Write Lock）

把握三种情况

- 锁是自由状态时，读写操作都可以获取
- 锁被读操作获取时，其他读操作任然可以获取，但写操作等待
- 锁被写操作获取时，其他写操作和读操作都等待

### 条件变量（Condition Variable）

使用条件变量可以让多个线程一起等待某个事件的发生，当事件发生时（条件变量被唤醒），所有的线程可以一起恢复执行，